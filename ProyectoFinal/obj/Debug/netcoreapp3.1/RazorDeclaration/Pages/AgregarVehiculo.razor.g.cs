#pragma checksum "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\Pages\AgregarVehiculo.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "a86a1fbb3d4f61a7d28716de76a464634bc9c298"
// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace ProyectoFinal.Pages
{
    #line hidden
    using System.Collections.Generic;
    using System.Linq;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 2 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using ProyectoFinal;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using ProyectoFinal.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using Radzen;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using Radzen.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\_Imports.razor"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\Pages\AgregarVehiculo.razor"
using System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\Pages\AgregarVehiculo.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\Pages\AgregarVehiculo.razor"
using System.Net.Http.Headers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\Pages\AgregarVehiculo.razor"
using System.Threading.Tasks;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\Pages\AgregarVehiculo.razor"
using System.Text;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\Pages\AgregarVehiculo.razor"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/agregar_vehiculo")]
    public partial class AgregarVehiculo : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 87 "C:\Users\Daniel Lora\Desktop\Blazor's Apps\ProyectoFinal\Pages\AgregarVehiculo.razor"
       

    string marca;
    string modelo;
    int año;
    string color;
    int precio;
    string tipo;
    int capacidad;
    int pasajeros;
    string matricula;
    long seguro;
    string foto;



    public void addVehicle()
    {
        string API = "https://pruebasv4.herokuapp.com/registervehicle";

        Vehicle nuevo_vehiculo = new Vehicle();

        nuevo_vehiculo.BRAND = marca;
        nuevo_vehiculo.MODEL = modelo;
        nuevo_vehiculo.YEAR = año;
        nuevo_vehiculo.COLOUR = color;
        nuevo_vehiculo.PRICEPERDAY = precio;
        nuevo_vehiculo.TYPE = tipo;
        nuevo_vehiculo.LOADCAPACITY = capacidad.ToString();
        nuevo_vehiculo.PASSAGERS = pasajeros;
        nuevo_vehiculo.ENROLLMENT = matricula;
        nuevo_vehiculo.INSURANCE_NO = seguro.ToString();
        nuevo_vehiculo.PHOTO = foto;


        //GetPost2(API, nuevo_vehiculo);
    }

    //public async Task<string> Lanzar(Vehicle v)
    //{

    //    try
    //    {

    //        HttpClient client = new HttpClient()
    //        {
    //            BaseAddress = new Uri("https://pruebasv4.herokuapp.com/registervehicle"),
    //        };
    //        client.DefaultRequestHeaders.Accept.Clear();
    //        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
    //        HttpResponseMessage respuesta = client.PostAsJsonAsync("/registervehicle/", v).Result;
    //        if (respuesta.StatusCode == HttpStatusCode.OK)
    //        {
    //            // La respuesta es correcta y por ejemplo la retorno como string
    //            return await respuesta.Content.ReadAsStringAsync();
    //        }

    //    }
    //    catch (Exception e)
    //    {

    //    }

    //    return "OK";

    //}

    //public static string GetPost1(string url, Vehicle vehiculo)
    //{

    //    string result = "";


    //    WebRequest oRequest = WebRequest.Create(url);
    //    oRequest.Method = "post";
    //    oRequest.ContentType = "application/json; charset-UTF-8";

    //    using (var oSW = new StreamWriter(oRequest.GetRequestStream()))
    //    {

    //        string json = JsonConvert.SerializeObject(vehiculo, Formatting.Indented);

    //        oSW.Write(json);

    //        oSW.Flush();
    //        oSW.Close();

    //    }

    //    WebResponse oResponse = oRequest.GetResponse();
    //    using (var oSR = new StreamReader(oResponse.GetResponseStream()))
    //    {
    //        result = oSR.ReadToEnd().Trim();
    //    }


    //    return result;
    //}

    //public static string GetPost2(string url, Vehicle vehiculo)
    //{

    //    string result = "";


    //    WebRequest oRequest = WebRequest.Create(url);
    //    oRequest.Method = "post";
    //    oRequest.ContentType = "application/json; charset-UTF-8";

    //    using (var oSW = new StreamWriter(oRequest.GetRequestStream()))
    //    {

    //        string json = "{ \"BRAND\":\"Audi\", \"MODEL\":\"R8\", \"YEAR\":\"2015\", \"COLOUR\":\"Azul\", \"PRICEPERDAY\":\"5000\"}";

    //        oSW.Write(json);

    //        oSW.Flush();
    //        oSW.Close();

    //    }

    //    WebResponse oResponse = oRequest.GetResponse();
    //    using (var oSR = new StreamReader(oResponse.GetResponseStream()))
    //    {
    //        result = oSR.ReadToEnd().Trim();
    //    }


    //    return result;
    //}

    public async Task ApiRest()
    {
        var http = new HttpClient();

        var body = new
        {
            BRAND = marca,
            MODEL = modelo,
            YEAR = año,
            COLOUR = color,
            PRICEPERDAY = precio,
            TYPE = tipo,
            LOADCAPACITY = capacidad,
            PASSAGERS = pasajeros,
            ENROLLMENT = matricula,
            INSURANCE_NO = seguro,
            PHOTO = foto,

        };

        var jsonBody = JsonConvert.SerializeObject(body);
        var buffer = Encoding.UTF8.GetBytes(jsonBody);
        var byteContent = new ByteArrayContent(buffer);
        byteContent.Headers.ContentType = new MediaTypeHeaderValue("application/json");

        var response = await http.PostAsync("https://pruebasv4.herokuapp.com/registervehicle", byteContent);
        // var response = await http.GetAsync("https://pruebasv4.herokuapp.com");

        var content = await response.Content.ReadAsStringAsync();

        Console.WriteLine(content);
    }

    public class Vehicle
    {

        public string BRAND { get; set; }

        public string MODEL { get; set; }

        public int YEAR { get; set; }

        public string COLOUR { get; set; }

        public int PRICEPERDAY { get; set; }

        public string TYPE { get; set; }

        public string LOADCAPACITY { get; set; }

        public int PASSAGERS { get; set; }

        public string ENROLLMENT { get; set; }

        public string INSURANCE_NO { get; set; }

        public string PHOTO { get; set; }

        public string LATITUDE { get; set; }

        public string LONGITUDE { get; set; }

    }


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
